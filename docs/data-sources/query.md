---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "graphql_query Data Source - GraphQL"
subcategory: ""
description: |-
  A GraphQL query data source that can execute GraphQL queries.
---

# graphql_query

A GraphQL query data source that can execute GraphQL queries.

## Example Usage

### Basic Query

```hcl
data "graphql_query" "users" {
  query = <<-EOT
    query GetUsers {
      users {
        id
        name
        email
      }
    }
  EOT
}
```

### Query with Simple Variables

```hcl
data "graphql_query" "user_by_id" {
  query = <<-EOT
    query GetUser($id: ID!) {
      user(id: $id) {
        id
        name
        email
      }
    }
  EOT
  
  query_variables = {
    id = "123"
  }
}
```

### Query with Complex Variables (Nested Objects and Arrays)

```hcl
data "graphql_query" "filtered_policies" {
  query = file("./queries/posture-policies/read-posture-policies.gql")
  
  query_variables = {
    filterBy = {
      enabled = false
      creatorType = {
        equals = ["WIZ", "CUSTOM"]
      }
      severity = {
        in = ["HIGH", "CRITICAL"]
      }
    }
    orderBy = {
      field = "SEVERITY"
      direction = "DESC"
    }
  }
}
```

### Query with Array Variables

```hcl
data "graphql_query" "users_by_ids" {
  query = <<-EOT
    query GetUsersByIds($ids: [ID!]!) {
      users(ids: $ids) {
        id
        name
        email
      }
    }
  EOT
  
  query_variables = {
    ids = ["1", "2", "3", "4"]
  }
}
```

### Query with Mixed Data Types

```hcl
data "graphql_query" "complex_filter" {
  query = <<-EOT
    query SearchItems($filter: SearchFilter!) {
      searchItems(filter: $filter) {
        id
        name
        score
      }
    }
  EOT
  
  query_variables = {
    filter = {
      text = "search term"
      limit = 10
      offset = 0
      enabled = true
      tags = ["tag1", "tag2"]
      metadata = {
        source = "api"
        version = "1.0"
      }
    }
  }
}
```

## Argument Reference

The following arguments are supported:

* `query` - (Required) The GraphQL query to execute.
* `query_variables` - (Optional) Variables for the GraphQL query. Can be any valid JSON value (object, array, string, number, boolean, null).
* `paginated` - (Optional) Whether the query is paginated. Defaults to `false`.

## Attributes Reference

In addition to the arguments above, the following attributes are exported:

* `query_response` - The raw body of the HTTP response from the last read of the object.
* `id` - The ID of the data source result.

## Notes

- The `query_variables` field supports complex nested structures including objects, arrays, strings, numbers, booleans, and null values.
- Variables are automatically converted to JSON and sent with the GraphQL request.
- The response is stored as a JSON string in the `query_response` attribute.
- For paginated queries, set `paginated = true` to enable automatic pagination handling.
